importScripts("script2.js");let self=this;function receiveMessage(message){var data=JSON.parse(message.data),workerResult;const MESSAGE_ID=data[0];switch(data[1]){case"close":self.close();break;case"generatePDF":workerResult=generatePDF(data[2]);break;case"generateCharts":workerResult=generateCharts(data[2])}self.postMessage(JSON.stringify([MESSAGE_ID,workerResult]))}function generateCharts(chartData){let obj=chartData.obj,nom=chartData.nom,charts={};if(Array.isArray(obj)&&obj[0]){const enumerable_data=obj.filter(e=>e.sender&&"null"!=e.sender&&null!=e.sender);charts[`${nom}`]={data:[],labels:[],series:["Delivered","Pending","Failed","Requeued"],total:[],requeue:[],total_series:["Received"],options:{colors:["#FF0000","#00FF00","#0000FF","#aaaaaa","#00CCFF","#FFCCFF","#000000"],title:{display:!0,text:nom.replace(/\_/gi," ").toUpperCase()},legend:{display:!0,position:"bottom"}}};let d={delivered:[],pending:[],failed:[],requeued:[]};return enumerable_data.forEach(v=>{charts[`${nom}`].labels.push(`${v.sender} (${v.total_received})`),d.delivered.push(v.total_delivered),d.pending.push(v.total_pending),d.failed.push(v.total_failed),d.requeued.push(v.total_requeued),charts[`${nom}`].requeue.push([v.total_requeue_failed,v.total_requeue_sent]),charts[`${nom}`].total.push(v.total_received)}),charts[`${nom}`].data=Array(d.delivered,d.pending,d.failed,d.requeued),{title:nom,data:charts[`${nom}`]}}}function generatePDF(vals){if(!vals)return;let doc=new jsPDF("l","pt");return doc.autoTable(vals.headers,vals.data,{styles:{fillColor:[100,175,250],fontSize:5},columnStyles:{id:{fillColor:255}},margin:{top:60},addPageContent:function(data){doc.text(`${vals.text}     at     ${(new Date).format("yyyy/mm/dd HH:mm")}`,40,30)}}),doc}self.addEventListener("message",receiveMessage,!1);